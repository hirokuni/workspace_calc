package com.kawasaki.calculator;

import java.math.BigDecimal;

import android.util.Log;

public class calc {
	private static String TAG = calc.class.getSimpleName();

	private BigDecimal memoryB;
	private BigDecimal setB;
	private BigDecimal setConstMulB;
	
	private int operator;
	static final int NON = 0;
	static final int ADD = 1;
	static final int SUB = 2;
	static final int DIV = 3;
	static final int MUL = 4;
	
	public calc() {
		clear();
	}
	
	public void clear() {
		operator = NON;
		memoryB = new BigDecimal(0);
		setB = new BigDecimal(0);
		setConstMulB = new BigDecimal(0);
	}

	public void setVal(double i) {
		
		switch(operator) {
		case NON:
			memoryB = new BigDecimal(i);
			break;
		case ADD:
			setB = new BigDecimal(i);
			break;
		case SUB:
			setB = new BigDecimal(-i);
			break;
		case MUL:
			if (setB.doubleValue() != 0.0) {
				//memory += set * i;
				BigDecimal tmp = setB.multiply(new BigDecimal(i));
				memoryB = memoryB.add(tmp);
				setB = new BigDecimal(0);
				setConstMulB = new BigDecimal(i);
			} else {
				//memory *= i;
				memoryB = memoryB.multiply(new BigDecimal(i));
			}
			break;
		case DIV:
			if (setB.doubleValue() != 0.0) {
				//memory += set / i;			
				BigDecimal tmp = setB.divide(new BigDecimal(i));
				memoryB = memoryB.add(tmp);
				setB = new BigDecimal(0);
			} else {
				//memory /= i;
				memoryB = memoryB.divide(new BigDecimal(i));
			}
			break;
		default:
			Log.w(TAG,"illegal operator");
			break;
		}
		
		return;
	}
	
	/*
	 * Add
	 */
	public void setOperatorAdd() {
		operator = ADD;	
		if (setB.doubleValue() != 0.0) {
			memoryB = memoryB.add(setB);
			setB = new BigDecimal(0);
		}
		Log.i(TAG,"setOperatorAddã€€memoryB : " + memoryB.doubleValue());

	}
	
	/*
	 * Sub
	 */
	public void setOperatorSub() {
		operator = SUB;
		if (setB.doubleValue() != 0.0) {
			memoryB = memoryB.add(setB);
			setB = new BigDecimal(0);
		}
	
	}
	
	public void setOperatorMul() {
		operator = MUL;
	}
	
	public void setOperatorDiv() {
		operator = DIV;
	}
	
	public double equal() {
		//return memory + setB.doubleValue();
		return memoryB.add(setB).doubleValue();
	}


	
	
	
	

	

}
